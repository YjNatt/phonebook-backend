(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),s=n.n(r),c=n(17),o=n.n(c),a=(n(22),n(3)),u=n(0),i=function(e){var t=e.name,n=e.setNameSearch;return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Filter shown with "}),Object(u.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},d=n(7),b=n(5),l=n.n(b),f="/api/persons",j={create:function(e,t){var n={name:e,number:t};return l.a.post(f,n).then((function(e){return e.data}))},getAll:function(){return l.a.get(f).then((function(e){return e.data}))},deleteById:function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.status}))},update:function(e,t){var n=e.id,r=e.name;return l.a.put("".concat(f,"/").concat(n),{name:r,number:t}).then((function(e){return e.data}))}},m=function(e){return Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=e.newName.trim(),r=e.newNumber.trim();if(e.persons.some((function(e){return e.name===n}))){if(!function(e){var t="".concat(e," is already added to phonebook,")+"replace the old number with the new one?";return window.confirm(t)}(n))return;var s=e.persons.find((function(e){return e.name===n}));j.update(s,r).then((function(t){var r=e.persons.findIndex((function(e){return e.id===t})),s=Object(d.a)(e.persons);s.splice(r,1,t),e.setPersons(s),e.setNewMessage({success:"Updated ".concat(n)}),setTimeout((function(){e.setNewMessage(null)}),3e3)})).catch((function(t){var r="Information of ".concat(n," has already been removed from server");e.setPersons(e.persons.filter((function(e){return e.id!==s.id}))),e.setNewMessage({error:r}),setTimeout((function(){e.setNewMessage(null)}),3e3)}))}else j.create(n,r).then((function(t){e.setPersons(e.persons.concat(t)),e.setNewMessage({success:"Added ".concat(n)}),setTimeout((function(){e.setNewMessage(null)}),3e3)})),e.setNewName(""),e.setNewNumber("")},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.personsToShow,n=e.persons,r=e.setPersons,s=function(e){var t=e.target.dataset.id,s=n.find((function(e){return e.id===Number(t)}));window.confirm("Delete ".concat(s.name))&&j.deleteById(t).then((function(e){if(200===e){var s=Object(d.a)(n),c=s.findIndex((function(e){return e.id===Number(t)}));s.splice(c,1),r(s)}}))};return Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number,Object(u.jsx)("button",{"data-id":e.id,onClick:s,children:"delete"})]},e.id)}))})},p=function(e){var t=e.message;if(!t)return null;var n={background:"lightgray",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return t.success?n.color="green":t.error&&(n.color="red"),Object(u.jsx)("div",{style:n,children:t.success||t.error})},O=function(){var e,t=Object(r.useState)([]),n=Object(a.a)(t,2),s=n[0],c=n[1],o=Object(r.useState)(""),d=Object(a.a)(o,2),b=d[0],l=d[1],f=Object(r.useState)(""),O=Object(a.a)(f,2),w=O[0],g=O[1],v=Object(r.useState)(""),N=Object(a.a)(v,2),x=N[0],S=N[1],y=Object(r.useState)(null),C=Object(a.a)(y,2),M=C[0],P=C[1];return Object(r.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]),e=""===x?s:s.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(p,{message:M}),Object(u.jsx)(i,{name:x,setNameSearch:S}),Object(u.jsx)(m,{setNewMessage:P,persons:s,setPersons:c,newName:b,setNewName:l,newNumber:w,setNewNumber:g}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(h,{personsToShow:e,setPersons:c,persons:s,setNewMessage:P})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),s(e),c(e),o(e)}))};o.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),w()}},[[42,1,2]]]);
//# sourceMappingURL=main.1064b897.chunk.js.map