(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),c=n(17),o=n.n(c),a=(n(22),n(3)),u=n(0),i=function(e){var t=e.name,n=e.setNameSearch;return Object(u.jsxs)("div",{children:[Object(u.jsx)("label",{children:"Filter shown with "}),Object(u.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})},d=n(7),l=n(5),b=n.n(l),f="/api/persons",j={create:function(e,t){var n={name:e,number:t};return b.a.post(f,n).then((function(e){return e.data}))},getAll:function(){return b.a.get(f).then((function(e){return e.data}))},deleteById:function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.status}))},update:function(e,t){var n=e.id,s=e.name;return b.a.put("".concat(f,"/").concat(n),{name:s,number:t}).then((function(e){return e.data}))}},m=function(e){return Object(u.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=e.newName.trim(),s=e.newNumber.trim();if(e.persons.some((function(e){return e.name===n}))){if(!function(e){var t="".concat(e," is already added to phonebook,")+"replace the old number with the new one?";return window.confirm(t)}(n))return;var r=e.persons.find((function(e){return e.name===n}));j.update(r,s).then((function(t){var s=e.persons.findIndex((function(e){return e.id===t})),r=Object(d.a)(e.persons);r.splice(s,1,t),e.setPersons(r),e.setNewMessage({success:"Updated ".concat(n)}),setTimeout((function(){e.setNewMessage(null)}),3e3)})).catch((function(t){var s="Information of ".concat(n," has already been removed from server");e.setPersons(e.persons.filter((function(e){return e.id!==r.id}))),e.setNewMessage({error:s}),setTimeout((function(){e.setNewMessage(null)}),3e3)}))}else j.create(n,s).then((function(t){e.setPersons(e.persons.concat(t)),e.setNewMessage({success:"Added ".concat(n)}),setTimeout((function(){e.setNewMessage(null)}),3e3)})).catch((function(t){console.log(t.response.data),e.setNewMessage(t.response.data),setTimeout((function(){e.setNewMessage(null)}),3e3)})),e.setNewName(""),e.setNewNumber("")},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.personsToShow,n=e.persons,s=e.setPersons,r=function(e){var t=e.target.dataset.id,r=n.find((function(e){return e.id===t}));window.confirm("Delete ".concat(r.name))&&j.deleteById(t).then((function(e){if(204===e){var r=Object(d.a)(n),c=r.findIndex((function(e){return e.id===Number(t)}));r.splice(c,1),s(r)}}))};return Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number,Object(u.jsx)("button",{"data-id":e.id,onClick:r,children:"delete"})]},e.id)}))})},p=function(e){var t=e.message;if(!t)return null;var n={background:"lightgray",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};return t.success?n.color="green":t.error&&(n.color="red"),Object(u.jsx)("div",{style:n,children:t.success||t.error})},w=function(){var e,t=Object(s.useState)([]),n=Object(a.a)(t,2),r=n[0],c=n[1],o=Object(s.useState)(""),d=Object(a.a)(o,2),l=d[0],b=d[1],f=Object(s.useState)(""),w=Object(a.a)(f,2),O=w[0],g=w[1],v=Object(s.useState)(""),N=Object(a.a)(v,2),x=N[0],S=N[1],M=Object(s.useState)(null),y=Object(a.a)(M,2),C=y[0],P=y[1];return Object(s.useEffect)((function(){j.getAll().then((function(e){return c(e)}))}),[]),e=""===x?r:r.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())})),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(p,{message:C}),Object(u.jsx)(i,{name:x,setNameSearch:S}),Object(u.jsx)(m,{setNewMessage:P,persons:r,setPersons:c,newName:l,setNewName:b,newNumber:O,setNewNumber:g}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(h,{personsToShow:e,setPersons:c,persons:r,setNewMessage:P})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),s(e),r(e),c(e),o(e)}))};o.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(w,{})}),document.getElementById("root")),O()}},[[42,1,2]]]);
//# sourceMappingURL=main.233bdfac.chunk.js.map